
import time
import Adafruit_ADS1x15

# Create an ADS1115 instance
ADC = Adafruit_ADS1x15.ADS1115()

# Set the gain to Â±4.096V (adjust if needed)
GAIN = 2/3
# GAIN = 1
# GAIN = 2
# GAIN = 4
# GAIN = 8
# GAIN = 16

# Specify the ADC channels for the joystick axes
X_CHANNEL = 0
Y_CHANNEL = 1

# Define the GPIO pin for the push button
BUTTON_PIN = 16 # GPIO16

# Initialize the GPIO pin for the button
import RPi.GPIO as GPIO
GPIO.setmode(GPIO.BCM)
GPIO.setup(BUTTON_PIN, GPIO.IN, pull_up_down=GPIO.PUD_UP)

# Initialize variable for previous button state
prev_button_state = GPIO.HIGH

try:
    while True:
        x_value = ADC.read_adc(X_CHANNEL, gain=GAIN)
        y_value = ADC.read_adc(Y_CHANNEL, gain=GAIN)
        button_state = GPIO.input(BUTTON_PIN)

        print(f"X-axis Value: {x_value}, Y-axis Value: {y_value}, Button State: {button_state}")

        # Detect button press event (transition from HIGH to LOW)
        if prev_button_state == GPIO.HIGH and button_state == GPIO.LOW:
            print("Button Pressed!")

        # Detect button release event (transition from LOW to HIGH)
        if prev_button_state == GPIO.LOW and button_state == GPIO.HIGH:
            print("Button Released!")

        prev_button_state = button_state

        time.sleep(0.1)

except KeyboardInterrupt:
    pass
finally:
    GPIO.cleanup()
